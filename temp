<dashboard>
  <label>Method Execution Time Dashboard</label>
  <description>Dashboard to monitor method execution times and drill down to detailed logs.</description>
  <row>
    <panel>
      <input type="time" token="time_range">
        <default>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
        </default>
      </input>
      
      <!-- New dropdown for sourcetype filter -->
      <input type="dropdown" token="sourcetype_filter">
        <label>Select Source Type:</label>
        <choice value="*">All Source Types</choice>
        <choice value="a">Source Type A</choice>
        <choice value="b">Source Type B</choice>
        <choice value="c">Source Type C</choice>
        <default>*</default> <!-- Default selection -->
      </input>
    </panel>
  </row>
  <row>
    <panel>
      <title>Average Execution Time by Method</title>
      <chart>
        <search>
          <query>
            <![CDATA[
            index=<your_index> sourcetype="foo.$sourcetype_filter$.bin"
            earliest=$time_range.earliest$ latest=$time_range.latest$ 
            | rex field=_raw "start\\[(?P<start>\\d+)\\] time\\[(?P<execution_time>\\d+)\\] tag\\[(?P<tag>[^\\]]+)\\] message\\[(?P<message>[^\\]]+)\\]"
            | stats avg(execution_time) as avg_time by tag
            | sort -avg_time
            ]]>
          </query>
        </search>
        <option name="charting.chart">column</option>
        <option name="charting.series">multi</option>
        <option name="charting.axisTitleY">Average Execution Time (ms)</option>
      </chart>
    </panel>
  </row>
</dashboard>
